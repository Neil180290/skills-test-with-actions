name: Conditional Workflow

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  job-1:
    runs-on: ubuntu-latest
    outputs:
      output-variable: "conditional-value"

    steps:
      - name: Set Output Variable
        run: echo "Setting output-variable=conditional-value"

      - name: Debug Output Variable
        run: echo "Output variable value:${{ needs.job-1.outputs.output-vars }}"

  job-2:
    needs: job-1
    runs-on: ubuntu-latest
    if: ${{ needs.job-1.outputs.output-vars == 'conditional-value' }}

    steps:
      - name: Conditional Step
        run: echo "Running Job 2 because the condition is met"

  job-3:
    needs: job-2
    runs-on: ubuntu-latest
    if: success() || cancelled()

    steps:
      - name: Job 3
        run: echo "Running Job 3"
